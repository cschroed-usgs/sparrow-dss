// ===========
// OVERVIEW: 
// ===========
There are 4 basic objects in the schema: MODEL, REACH, SOURCE, and implicitly NODES. MODELs are the encompassing object, or the universe containing REACHes, SOURCEs, and NODEs. REACHes are the directed streams which connects NODEs, the NODEs being defined only implicitly via REACHes. The connection of REACHes is also available via MODEL_REACH_UPSTREAM (should be able to infer this from MODEL_REACH_TOPO using FNODE, TNODE info). REACHES have Oracle Spatial GEOMetry data, ATTRIBute metadata, and TOPOlogy data which defines the connection and direction connecting NODEs. Each row the SOURCE table is actually a source type. Actual sources belong to each reach, so that MODEL_REACH_ID and SOURCE_ID (type) form the primary key for an actual source.

Associated to REACHes and invidual SOURCEs are actual coefficients and values which constitute the data of the model.


// ========
// TABLES:
// ========
SPARROW_DSS.MDRT_DF4A$ and SPARROW_DSS.MDRT_DF52$:
	Tables which hold the Spatial Indices. All spatial index tables begin with mdrt
	
MODEL_REACH: Reaches are connectors between two nodes -- FNODE and TNODE 
	MODEL_REACH_ID: globally unique identifier, PK
	SPARROW_MODEL_ID + IDENTIFIER: alternate key
	ENH_REACH_ID fk
	REACH_SIZE (BETWEEN 1 AND 5) ?what does this do?
	IFTRAN controls whether the nutrient flows from FNODE to TNODE

MODEL_REACH_ATTRIB: additional metadata for each reach. There should be a 1-1 correspondence with rows in MODEL_REACH
	MODEL_REACH_ID PK

MODEL_REACH_GEOM: Holds the Oracle Spatial geometry elements (multi-line) for each reach. 1-1 with MODEL_REACH.
	MODEL_REACH_ID PK

MODEL_REACH_TOPO: seems to subsumed with MODEL_REACH. **ACTION** DELETE FROM DATABASE. ALSO check code to eliminate all refs

MODEL_REACH_UPSTREAM: two columns, linking table between reach and its parent(s). Not currently populated

REACH_COEF: Not sure what this does. Seems to have to do with iterative modelling. Possibly decay. Three pieces of float data
	REACH_COEF_ID PK
	MODEL_REACH_ID + ITERATION alternate key
	INC_DELIVERY
	TOTAL_DELIVERY
	BOOT_ERROR

SOURCE: metadata on each source. 
	SOURCE_ID PK
	SPARROW_MODEL_ID + NAME alternate key
	IDENTIFIER_NUMBER **ACTION** What is this?

SOURCE_REACH_COEF: Keyed by source and reach, to store the coefficient
	SOURCE_REACH_COEF_ID PK
	MODEL_REACH_ID + SOURCE_ID + ITERATION alternate key
	VALUE float

SOURCE_REACH_PREDICT: ?? Keyed by source and reach. Two stored values
	SOURCE_REACH_PREDICT_ID PK
	MODEL_REACH_ID + SOURCE_ID + ITERATION alternate key
	INCREMENTAL
	CUMULATIVE

SOURCE_VALUE: keyed by source and reach, to store the value
	SOURCE_VALUE_ID PK
	MODEL_REACH_ID + SOURCE_ID alternate key
	VALUE float

SPARROW_MODEL: metadata and administrative rights info for each sparrow model
	SPARROW_MODEL_ID PK
	ENH_NETWORK_ID + IS_APPROVED + IS_PUBLIC + IS_ARCHIVED + NAME alternate key (?? this seems weird)

TOTAL_PREDICT: Keyed by model and reach. Two pieces of data
	TOTAL_PREDICT_ID PK
	SPARROW_MODEL_ID + ITERATION alternate key
	NO_DECAY_TOTAL float
	TOTAL float


// ==============
// VIEWS
// ==============

MODEL_ATTRIB_VW combines MODEL_REACH and MODEL_REACH_ATTRIB in the obvious way but adds other info if not available from STREAM_NETWORK.ENH_ATTRIB_VW. So, MODEL_REACH_ATTRIB really overrides ENH_ATTRIB_VW
	NOTE: view definition of second union, of MODEL_REACH and ENH_ATTRIB_VW, the where clause WHERE
    NOT EXISTS (SELECT MODEL_REACH_ID FROM MODEL_REACH_ATTRIB modattrib WHERE modattrib.MODEL_REACH_ID = model.MODEL_REACH_ID)
   seems redundant. Should be
   WHERE model.MODEL_REACH_ID NOT IN (SELECT MODEL_REACH_ID FROM MODEL_REACH_ATTRIB)

Seems like this can be optimized, either a single join or a nonsubquery WHERE clause as above. Do profiling before optimization.


MODEL_GEOM_VW combines MODEL_REACH and STREAM_NETWORK.ENH_GEOM_VW, but as with MODEL_ATTRIB_VW, STREAM_NETWORK.ENH_GEOM_VW is overridden by MODEL_REACH_GEOM

SPARROW_DSS.MODEL_UPSTREAM_VW seems very strange. It's just the relation table MODEL_REACH_UPSTREAM with 
MODEL_REACH_ID replaced by MODEL_REACH.IDENTIFIER, and addded the SPARROW_MODEL_ID 

// =================
// LOADING PLAN
// ============
1) Greg provides export files of ancil.txt,  coef.txt, src.txt, topo.txt, and vewe.txt
2) 




